TODO
* handle compressed requests

DONE
1 moved html functions into html.sh
